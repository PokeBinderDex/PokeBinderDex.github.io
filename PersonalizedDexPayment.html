

<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Payer</title></head>
<body>
  <h2>Payer au Pokédex</h2>

  <label for="email">Votre email :</label>
  <input type="email" id="email" placeholder="email@example.com" required>
  <button id="payBtn">Payer 5€</button>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    const stripe = Stripe("pk_test_51S7Goh4KJAy57ttRX7Xi0c2jri9BrsRdZm3EjU244EyGB5CkLWPsigqMEXDRyKQAZVeUwSIDoyxdy3BgobhjzbaQ00Hc9vUecJ"); // ta clé publique
    const SERVER_URL = "https://serverpps-5wfx.onrender.com";

    document.getElementById("payBtn").addEventListener("click", async () => {
      const email = document.getElementById("email").value.trim();
      if (!email) return alert("Renseigne un email valide");

      const r = await fetch(`${SERVER_URL}/create-checkout-session`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email })
      });
      const j = await r.json();
      if (j.id) {
        await stripe.redirectToCheckout({ sessionId: j.id });
      } else {
        alert('Erreur création session');
        console.error(j);
      }
    });
  </script>
</body>
</html>

